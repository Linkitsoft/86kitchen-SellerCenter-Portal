"use strict";(self.webpackChunkpartnercenter=self.webpackChunkpartnercenter||[]).push([[697],{6697:(e,l,i)=>{i.r(l),i.d(l,{default:()=>g});var n=i(7313),a=i(8467),s=i(9672),r=i(5805),o=(i(4091),i(8897)),d=i(1743),t=i(9560),c=i(5627),u=i(2563),v=i(4135),p=i(4491),m=(i(9799),i(6417));const h=()=>{var e;const[l,i]=(0,n.useState)(null),s=(0,a.s0)(),{setUser:h}=(0,o.a)(),[g,x]=(0,n.useState)(null),{control:j,handleSubmit:w,register:N,trigger:S,formState:{errors:b,isSubmitting:y}}=(0,c.cI)({defaultValues:{email:"",password:"",type:""},mode:"onBlur",resolver:(0,u.X)(r.bx)}),_=async e=>{try{await S(e)}catch(l){console.error(l)}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"login_inputWrapper",children:(0,m.jsx)(t.Z,{label:"Email",placeholder:"Enter Email",name:"email",errors:null===b||void 0===b?void 0:b.email,control:j,handleBlur:_,isLabel:!0,register:N})}),(0,m.jsxs)("div",{className:"login_inputWrapper",children:[(0,m.jsx)("label",{htmlFor:"password",children:"Password"}),(0,m.jsx)(d.Z,{label:"Password",placeholder:"Password",name:"password",errors:null===b||void 0===b?void 0:b.password,control:j,handleBlur:_,register:N})]}),(0,m.jsx)("div",{className:"login_inputWrapper",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Select Type"}),(0,m.jsxs)("select",{control:j,...N("type"),onBlur:()=>_("type"),name:"type",children:[(0,m.jsx)("option",{selected:!0,hidden:!0,value:"",children:"Select Type"}),(0,m.jsx)("option",{value:0,children:"Super Admin"}),(0,m.jsx)("option",{value:1,children:"Observant User"})]}),b.type?(0,m.jsx)("div",{className:"verify_err",children:null===b||void 0===b||null===(e=b.type)||void 0===e?void 0:e.message}):null]})}),g&&(0,m.jsx)("div",{className:"login_inputWrapper",children:(0,m.jsx)("div",{className:"login_err",children:g})}),y&&(0,m.jsx)("div",{className:"login_inputWrapper",children:(0,m.jsx)("div",{className:"login_err"})}),(0,m.jsx)("div",{className:"login_loginBtn",children:(0,m.jsx)("button",{disabled:y,onClick:w((async e=>{var l,i;x(null);const n=await(0,v.cL)(e);if("fail"===(null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.status))return x("Invalid credentials"),p.Am.error("Invalid credentials");var a,s,r,o,d,t,c,u;"success"===(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.status)&&(0==(null===e||void 0===e?void 0:e.type)?(h("admin"),window.localStorage.setItem("token",null===n||void 0===n||null===(a=n.data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.token),window.localStorage.setItem("userId",null===n||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.id),window.location.reload()):(h("user"),window.localStorage.setItem("token",null===n||void 0===n||null===(d=n.data)||void 0===d||null===(t=d.data)||void 0===t?void 0:t.token),window.localStorage.setItem("userId",null===n||void 0===n||null===(c=n.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.id),window.location.reload()))})),children:y?"Please wait...":"Sign In"})}),(0,m.jsxs)("p",{className:"login_signup",children:["Don\u2019t have an account? ",(0,m.jsx)("span",{onClick:()=>s("/signup"),children:"Sign up"})]})]})},g=()=>{const e=(0,a.s0)();return(0,m.jsx)("div",{className:"login",children:(0,m.jsxs)("div",{className:"login_box",children:[(0,m.jsxs)("div",{className:"login_topHead",children:[(0,m.jsx)("img",{src:s,alt:"logo",onClick:()=>e("/home")}),(0,m.jsx)("p",{className:"head",children:"Partner Center"})]}),(0,m.jsx)("div",{className:"login_inputSection",children:(0,m.jsx)(h,{})})]})})}}}]);